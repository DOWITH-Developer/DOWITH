{% extends 'login/layout.html' %}

{% load static %}

{% block extra_head %}
    <!-- axios install -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script defer src="{% static 'js/settings_main/settings.js' %}"></script>
{% endblock %}

{% block content %}
    <div>
        <p>
            {{ request.user }}'s Page
        </p>
    </div>

    <div>
        <div>
            <div class="userInfo">
                {{ request.user }} 정보
            </div>
            <div class="userChallenge">
                나의 챌린지
            </div>
            <div class="setting">
                설정
            </div>
            <div class="ToS">
                약관
            </div>
        </div>

        <br>
        <br>
        
        <div class="content">
            <!-- <form action="" method="GET">
                {% csrf_token %}
                <p>디스플레이</p>
                <label><input type="radio" name="display_mode" checked> 라이트 모드</label>
                <label><input type="radio" name="display_mode"> 다크 모드</label>
                <button type="submit">저장</button>
                <button type="reset">초기화</button>
            </form> -->
            <div>
                <!-- {% for challenge in challengeTitleList %}
                    {{ challenge.fields.title }}
                {% endfor %} -->
            </div>
        </div>
    </div>

    <!-- <script>
        const userInfo = document.querySelector(".userInfo")
        const userChallenge = document.querySelector(".userChallenge")
        const setting = document.querySelector(".setting")
        const ToS = document.querySelector(".ToS")
        const contentBox = document.querySelector(".content")

        // userChallenge
        const onClickUserChallenge = async () => {
            const url = "/login/settings/user_challenge/";

            const {data} = await axios.get(url)
            printUserChallenge(data.ch_enrollments, data.ch_enrollments_len, data.ch_titles);
        }

        const printUserChallenge = (enrollmentList, enrollmentListLen, challengeList) => {
            contentBox.innerHTML = ''

            let enrollmentList_parsed = JSON.parse(enrollmentList)
            console.log(enrollmentList_parsed[0]);
            console.log(enrollmentList_parsed[0].fields);
            let challengeList_parsed = JSON.parse(challengeList)
            console.log(challengeList_parsed[0])

            let challengeTitleList = [];

            for(let i = 0; i < challengeList_parsed[enrollmentListLen - 1].pk; i++){
                if(enrollmentList_parsed[i].fields.challenge == challengeList_parsed[i].pk){
                    challengeTitleList.push(challengeList_parsed[i].fields.title)
                    console.log(challengeList_parsed[i])
                }
            }

            // console.log(enrollmentList_parsed, enrollmentListLen)
            const userChallengeTemplate = `
                <div class="userChallenge__content">
                    <div>
                        user의 challenge 접근하는 문법(쿼리셋?) 공부하기
                    </div>
                    <div class="here">
                    </div>
                </div>
            `
            const newUserChallengeDiv = new DOMParser().parseFromString(userChallengeTemplate, "text/html").body.firstElementChild
            contentBox.appendChild(newUserChallengeDiv)

            const here = document.querySelector(".here");
            for(let i = 0; i < challengeTitleList.length; i++){
                here.innerHTML += challengeTitleList[i] + ` `;
            }
        }

        userChallenge.addEventListener("click", onClickUserChallenge)
    </script> -->
{% endblock %}